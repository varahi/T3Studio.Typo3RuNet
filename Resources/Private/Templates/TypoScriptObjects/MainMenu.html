{namespace neos=TYPO3\Neos\ViewHelpers}
<f:render section="itemList" arguments="{items: items, site: site, attributes: attributes, navAttributes: navAttributes}" />
<f:section name="itemList">
  <div class="navbar navbar-default navbar-static-top topmenu" role="navigation">
    <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <f:for each="{items}" as="item" iteration="menuItemIterator">
          <li class="first-level {item.state}">
            <neos:link.node node="{item.node}">{item.label}</neos:link.node>
            <f:if condition="{item.subItems}">
                  <f:render section="subList" arguments="{items: item.subItems}" />
            </f:if>
          </li>
        </f:for>
      </ul>
     </div>
    </div>
    <div class="submenu-block">
      <p>Развивай бизнес - используй TYPO3</p>
      <f:render partial="Search" arguments="{_all}"/>
    </div>
  </div>
</f:section>
<f:section name="subList">
  <ul class="dropdown-menu">
    <f:for each="{items}" as="item">
      <li class="{item.state}">
        <neos:link.node node="{item.node}">{item.label}</neos:link.node>
         <f:if condition="{item.subItems}">
            <f:render section="subList" arguments="{items: item.subItems}" />
         </f:if>        
      </li>
    </f:for>
  </ul>
</f:section>